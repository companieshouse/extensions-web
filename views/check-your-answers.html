{% extends "layout.html" %}

{% block pageTitle %}
  Check your answers before sending your application
{% endblock %}

{% block backLink %}
  {{ govukBackLink({
    text: "Back",
    href: "/extensions/back-link",
    attributes: {
      "data-event-id": "back-button"
    }
  }) }}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">
        Check your application
      </h1>
      {% include "includes/company-details-summary.html" %}
      {% if extensionReasons.length > 1 %}
       <h2 class="govuk-heading-l">Extension reasons</h2>
     {% else %}
       <h2 class="govuk-heading-l">Extension reason</h2>
     {% endif %}
     {% for reason in extensionReasons %}
      <div class="reason-container">
       {% if extensionReasons.length > 1 %}
           <h3 class="govuk-heading-m">Reason {{ loop.index }}</h3>
       {% endif %}
       {% if reason.reason === "illness" %}
        <dl class="app-check-your-answers app-check-your-answers--long">
          <div class="app-check-your-answers__contents">
            <dt class="app-check-your-answers__question">
              Reason for extension
            </dt>
            <dd class="app-check-your-answers__answer">
              {{ reason.reason | capitalize }}
            </dd>
            <dd class="app-check-your-answers__change">
            </dd>
          </div>
          <div class="app-check-your-answers__contents">
            <dt class="app-check-your-answers__question">
              Who was ill?
            </dt>
            <dd class="app-check-your-answers__answer">
              {{ reason.affected_person | capitalize }}
            </dd>
            <dd class="app-check-your-answers__change">
              <a id="change-who-was-ill-{{loop.index}}" href="/extensions/illness/who-was-ill?reasonId={{ reason.id }}">
                Change<span class="govuk-visually-hidden"> who was ill</span>
              </a>
            </dd>
          </div>
          <div class="app-check-your-answers__contents">
            <dt class="app-check-your-answers__question">
              Illness start date
            </dt>
            <dd class="app-check-your-answers__answer">
              {{ reason.start_on }}
            </dd>
            <dd class="app-check-your-answers__change">
              <a id="change-ill-start-date-{{loop.index}}" href="/extensions/illness/illness-start-date?reasonId={{ reason.id }}">
                Change<span class="govuk-visually-hidden"> illness start date</span>
              </a>
            </dd>
          </div>
          {% if reason.continued_illness === "yes" %}
          <div class="app-check-your-answers__contents">
            <dt class="app-check-your-answers__question">
              Continuing illness?
            </dt>
            <dd class="app-check-your-answers__answer">
              {{ reason.continued_illness | capitalize }}
            </dd>
            <dd class="app-check-your-answers__change">
              <a id="change-continued-illness-{{loop.index}}" href="/extensions/illness/continued-illness?reasonId={{ reason.id }}">
                Change<span class="govuk-visually-hidden"> continued illness</span>
              </a>
            </dd>
          </div>
          {% else %}
          <div class="app-check-your-answers__contents">
            <dt class="app-check-your-answers__question">
              Illness end date
            </dt>
            <dd class="app-check-your-answers__answer">
              {{ reason.end_on }}
             </dd>
            <dd class="app-check-your-answers__change">
              <a id="change-ill-end-date-{{loop.index}}" href="/extensions/illness/illness-end-date?reasonId={{ reason.id }}">
                Change<span class="govuk-visually-hidden"> illness end date</span>
              </a>
            </dd>
          </div>
          {% endif %}
          {% if reason.reason_information != null %}
          <div class="app-check-your-answers__contents">
            <dt class="app-check-your-answers__question">
              Further information
            </dt>
            <dd class="app-check-your-answers__answer">
              {{ reason.reason_information }}
            </dd>
            <dd class="app-check-your-answers__change">
              <a id="change-illness-info-{{loop.index}}" href="/extensions/illness/illness-information?reasonId={{ reason.id }}">
                Change<span class="govuk-visually-hidden"> further information</span>
              </a>
            </dd>
          </div>
          {% endif %}
          <div class="app-check-your-answers__contents">
            <dt class="app-check-your-answers__question">
              Supporting documents
            </dt>
            <dd class="app-check-your-answers__answer">
              <ul class="govuk-list govuk-list--bullet">
                {% for attachment in reason.attachments %}
                  <li>
                    <a href='' class='govuk-link'>{{attachment.name}}</a>
                  </li>
                {% endfor %}
              </ul>
            </dd>
            <dd class="app-check-your-answers__change">
              <a id="change-ill-evidence-upload-{{loop.index}}" href="/extensions/evidence-upload?reasonId={{ reason.id }}">Change</a>
            </dd>
          </div>
        </dl>
      {% elif reason.reason === "accounting issues" %}
        <dl class="app-check-your-answers app-check-your-answers--long">
          <div class="app-check-your-answers__contents">
            <dt class="app-check-your-answers__question">
              Reason for extension
            </dt>
            <dd class="app-check-your-answers__answer">
              {{ reason.reason | capitalize }}
            </dd>
            <dd class="app-check-your-answers__change">
            </dd>
          </div>
          <div class="app-check-your-answers__contents">
            <dt class="app-check-your-answers__question">
              Date issue happened
            </dt>
            <dd class="app-check-your-answers__answer">
              {{ reason.start_on }}
            </dd>
            <dd class="app-check-your-answers__change">
              <a id="change-accounting-issue-date-{{loop.index}}" href="/extensions/accounts/accounts-date?reasonId={{ reason.id }}">
                Change<span class="govuk-visually-hidden"> accounting issue date</span>
              </a>
            </dd>
          </div>
          <div class="app-check-your-answers__contents">
            <dt class="app-check-your-answers__question">
              Further information
            </dt>
            <dd class="app-check-your-answers__answer">
              {{ reason.reason_information }}
            </dd>
            <dd class="app-check-your-answers__change">
              <a id="change-accounting-issue-info-{{loop.index}}" href="/extensions/accounts/accounts-information?reasonId={{ reason.id }}">
                Change<span class="govuk-visually-hidden"> further information</span>
              </a>
            </dd>
          </div>
          <div class="app-check-your-answers__contents">
            <dt class="app-check-your-answers__question">
              Supporting documents
            </dt>
            <dd class="app-check-your-answers__answer">
              <ul class="govuk-list govuk-list--bullet">
                {% for attachment in reason.attachments %}
                  <li>
                    <a href='' class='govuk-link'>{{attachment.name}}</a>
                  </li>
                {% endfor %}
              </ul>
            </dd>
            <dd class="app-check-your-answers__change">
              <a id="change-accounts-evidence-upload-{{loop.index}}" href="/extensions/evidence-upload?reasonId={{ reason.id }}">Change</a>
            </dd>
          </div>
        </dl>
      {% else %}
        <dl class="app-check-your-answers app-check-your-answers--long">
          <div class="app-check-your-answers__contents">
            <dt class="app-check-your-answers__question">
              Reason for extension
            </dt>
            <dd class="app-check-your-answers__answer">
              {{ reason.reason | capitalize }}
            </dd>
            <dd class="app-check-your-answers__change">
            </dd>
          </div>
          {% if reason.reason_information != null %}
          <div class="app-check-your-answers__contents">
            <dt class="app-check-your-answers__question">
              Further information
            </dt>
            <dd class="app-check-your-answers__answer">
              {{ reason.reason_information }}
            </dd>
            <dd class="app-check-your-answers__change">
              <a id="change-reason-other-{{loop.index}}" href="/extensions/other/reason-other?reasonId={{ reason.id }}">
                Change<span class="govuk-visually-hidden"> further information</span>
              </a>
            </dd>
          </div>
          {% endif %}
           <div class="app-check-your-answers__contents">
            <dt class="app-check-your-answers__question">
              Supporting documents
            </dt>
            <dd class="app-check-your-answers__answer">
              <ul class="govuk-list govuk-list--bullet">
                {% for attachment in reason.attachments %}
                  <li>
                    <a href='' class='govuk-link'>{{attachment.name}}</a>
                  </li>
                {% endfor %}
              </ul>
            </dd>
            <dd class="app-check-your-answers__change">
              <a id="change-other-evidence-upload-{{loop.index}}" href="/extensions/evidence-upload?reasonId={{ reason.id }}">Change</a>
            </dd>
          </div>
        </dl>
      {% endif %}
      <p class="govuk-body">
        <a id="remove-reason-{{loop.index}}" href="/extensions/remove-reason?id={{reason.id}}&reasonNumber={{loop.index}}" class="govuk-link">Remove this reason</a>
      </p>
    </div>
    {% endfor %}
    <p class="govuk-!-margin-bottom-7 govuk-!-margin-top-7">
      <a href="/extensions/choose-reason" class="govuk-link">Add another reason</a>
    </p>

    <h2 class="govuk-heading-m">Submit your application for an extension</h2>

    <p>
      By submitting this application you are confirming that, to the best of your knowledge, the details you are providing are true.
    </p>

    <form method="post">
      {{ govukButton({
        text: "Confirm and submit",
        preventDoubleClick: true,
        attributes: {
          "data-event-id": "confirm-and-submit-button",
          id: "submit"
        }
      }) }}

    </form>
   </div>
  </div>
{% endblock %}
